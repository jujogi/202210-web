{"mappings":"oeACA,IAAAA,EAAAC,EAAA,SCDAC,EAAAD,EAAA,sBAiBAE,eAAeC,EAAaC,EAASC,EAAS,IAO1C,OANuBA,EAAOC,KAAKJ,MAAOK,IACtC,MAAMC,QAPdN,eAAoCE,EAASG,GACzC,MAAME,EAAaC,EAAAC,IAAIP,EAAS,mBAAmBG,EAAMK,QACzD,aAAaF,EAAAG,YAAYJ,EAAYF,GAKJO,CAAqBV,EAASG,GAE3D,OAAOG,EAAAK,eAAeL,EAAAC,IAAIP,EAASI,EAAeG,IAAIK,cDhB9D,MAAMC,EAAoBC,SAASC,eAAe,qBAElDF,EAAkBG,iBAAiB,UAAUlB,MAAOmB,IAChDA,EAAEC,iBACFC,QAAQC,IAAI,wBAEZ,MAAMZ,EAAOK,EAAkBL,KAAKa,MAC9BC,EAAcT,EAAkBS,YAAYD,MAC5CE,EAAQV,EAAkBU,MAAMF,MAChCG,EAAWX,EAAkBW,SAASH,MACtCpB,EAASY,EAAkBZ,OAAOwB,MAExC,IAAIC,EAAU,GAEd,GAAIzB,EAAO0B,OAAQ,CAEf,MAAMC,QAAuB7B,EAAaJ,EAAAK,QAAS,IAAIC,IAEvDyB,QAAgBG,QAAQC,IAAIF,GAGhC,MAAMG,EAAa,CA1BvBvB,KA2BQA,EA3BRc,YA4BQA,EA5BRC,MA6BQA,EA7BRC,SA8BQA,EACAvB,OAAQyB,SC5BhB5B,eAA0BkC,EAAIC,GAC1B,UACUpC,EAAAqC,OAAOrC,EAAAsC,WAAWH,EAAI,YAAaC,GACzCd,QAAQC,IAAI,qBACd,MAAMH,GACJE,QAAQC,IAAIH,ID0BVmB,CAAWzC,EAAAqC,GAAID","sources":["src/scripts/createProduct.js","src/scripts/functions/addProduct.js"],"sourcesContent":["// Import the functions you need from the SDKs you need\nimport { storage, db } from \"./app\";\nimport { addProduct, uploadImages } from \"./functions/addProduct\";\n\n\nconst createProductForm = document.getElementById(\"createProductForm\");\n\ncreateProductForm.addEventListener(\"submit\", async (e) => {\n    e.preventDefault();\n    console.log(\"Create a new product\");\n\n    const name = createProductForm.name.value;\n    const description = createProductForm.description.value;\n    const price = createProductForm.price.value;\n    const category = createProductForm.category.value;\n    const images = createProductForm.images.files;\n\n    let gallery = [];\n\n    if (images.length) {\n        // Vamos a subir las imagenes a firestore\n        const uploadedImages = await uploadImages(storage, [...images]);\n\n        gallery = await Promise.all(uploadedImages);\n    }\n\n    const newProduct = {\n        name,\n        description,\n        price,\n        category,\n        images: gallery,\n    };\n\n    await addProduct(db, newProduct);\n});","import { addDoc, collection } from \"firebase/firestore\";\nimport { ref, uploadBytes, getDownloadURL} from \"firebase/storage\";\n\nasync function addProduct(db, product) {\n    try {\n        await addDoc(collection(db, \"products\"), product);\n        console.log(\"Product added! :)\");\n    } catch(e) {\n        console.log(e);\n    }\n}\n\nasync function imageUploadReference(storage, image) {\n    const storageRef = ref(storage, `products/images/${image.name}`);\n    return await uploadBytes(storageRef, image);\n}\n\nasync function uploadImages(storage, images = []) {\n    const uploadedImages = images.map( async (image) => {\n        const imageReference = await imageUploadReference(storage, image);\n\n        return getDownloadURL(ref(storage, imageReference.ref.fullPath));\n    });\n\n    return uploadedImages;\n\n}\n\nexport {\n    addProduct,\n    uploadImages\n}\n"],"names":["$li1Mx","parcelRequire","$etBjH","async","$5ff810c2bfdb1b0e$export$633f5b6169e2b910","storage","images","map","image","imageReference","storageRef","$aYguL","ref","name","uploadBytes","$5ff810c2bfdb1b0e$var$imageUploadReference","getDownloadURL","fullPath","$429397c78ea7114e$var$createProductForm","document","getElementById","addEventListener","e","preventDefault","console","log","value","description","price","category","files","gallery","length","uploadedImages","Promise","all","newProduct","db","product","addDoc","collection","$5ff810c2bfdb1b0e$export$7caf006d7b64ee15"],"version":3,"file":"createProduct.63127337.js.map"}