var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequirede3a;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,a.call(r.exports,r,r.exports),r.exports}var c=new Error("Cannot find module '"+e+"'");throw c.code="MODULE_NOT_FOUND",c}).register=function(e,t){n[e]=t},e.parcelRequirede3a=a);var r=a("li1Mx"),c=a("1tHc5"),o=a("etBjH");var d=a("hMt9z"),i=a("2EF88");const s=document.getElementById("products"),u=document.getElementById("category"),l=document.getElementById("order");let p,f=[],g=[];async function m(){const e=await async function(e){const t=o.collection(e,"products");try{const{docs:e}=await o.getDocs(t);return e.map((e=>({...e.data(),id:e.id})))}catch(e){console.log(e)}}(r.db);s.innerHTML="",e.forEach((e=>{h(e)})),f=e}function h(e){const t=document.createElement("a");t.className="product",t.setAttribute("href",`./product.html?id=${e.id}`);const n=e.images?e.images[0]:"https://cdn1.iconfinder.com/data/icons/business-company-1/500/image-512.png",a=g.some((t=>t.id===e.id))?'<button class="product__cart" disabled>Producto añadido</button>':'<button class="product__cart">Añadir al carrito</button>';t.innerHTML=`\n    <img src="${n}" alt="" class="product__image">\n    <div class="product__info">\n        <p class="product__category">${e.category}</p> \n        <h2 class="product__name">${e.name}</h2>\n        <h3 class="product__price">${i.currencyFormat(e.price)}</h3>\n        ${a}\n    </div>\n    `,s.appendChild(t);const c=t.querySelector(".product__cart");c.addEventListener("click",(async t=>{t.preventDefault(),g.push(e),i.addProductToCart(g),p&&await d.createFirebaseCart(r.db,p.uid,g),c.setAttribute("disabled",!0),c.innerText="Producto añadido"}))}function y(){const e=u.value,t=l.value;let n=[];n=""!==e?f.filter((t=>t.category===e)):f,"asc"===t&&(n=n.sort(((e,t)=>t.price-e.price))),"desc"===t&&(n=n.sort(((e,t)=>e.price-t.price))),s.innerHTML="",n.forEach((e=>{h(e)}))}u.addEventListener("change",(e=>{y()})),l.addEventListener("change",(e=>{y()})),c.onAuthStateChanged(r.auth,(async e=>{e?(p=e,g=await d.getFirebaseCart(r.db,p.uid)):g=i.getMyLocalCart(),m()}));
//# sourceMappingURL=shop.7855240a.js.map
