{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SCAAC,EAAAD,EAAA,sBDGA,MAAME,EAAiBC,SAASC,eAAe,kBACzCC,EAAYF,SAASC,eAAe,aAE1CF,EAAeI,iBAAiB,UAAUC,MAAOC,IAC7CA,EAAEC,iBAEF,MAAMC,EAAOR,EAAeQ,KAAKC,MAI3BC,EAAW,CAbrBF,KAcQA,EAdRG,MAUkBX,EAAeW,MAAMF,MAVvCG,SAWqBZ,EAAeY,SAASH,MAMrCI,SAAS,GAGPC,QChBVT,eAA0BU,GAJ1BJ,MAIkCA,EAJlCC,SAIyCA,IACrC,IACI,MANRI,KAMgBA,SAAejB,EAAAkB,+BAA+BF,EAAMJ,EAAOC,GACnE,OAAOI,EACT,MAAMV,GAEO,uBAAXA,EAAEY,MACDC,MAAM,kDAGI,8BAAXb,EAAEY,MACDC,MAAM,uCDKWC,CAAWvB,EAAAkB,KAAML,SCS1CL,eAAiCgB,EAAIC,EAAQZ,EAAW,IACpD,UACUa,EAAAC,OAAOD,EAAAE,IAAIJ,EAAI,QAASC,GAASZ,GACzC,MAAOJ,GACLoB,QAAQC,IAAIrB,IDZXsB,CAAkB/B,EAAAwB,GAAIP,EAAQe,IAAKnB,GAEzCS,MAAM,eAAeX,QAIzBL,EAAUC,iBAAiB,UAAUE,IACjCA,EAAEC,iBAEF,MAAMI,EAAQR,EAAUQ,MAAMF,MACxBG,EAAWT,EAAUS,SAASH,OCXvCJ,eAAqBU,EAAMJ,EAAOC,GAC9B,IACI,MAtBTI,KAsBiBA,SAAejB,EAAA+B,2BAA2Bf,EAAMJ,EAAOC,GAC/DO,MAAM,uBAAuBH,EAAKL,SACpC,MAAML,GACJa,MAAM,oCDQXY,CAAMlC,EAAAkB,KAAMJ,EAAOC","sources":["src/scripts/login.js","src/scripts/functions/auth.js"],"sourcesContent":["import { db, auth } from \"./app\";\r\nimport { login, createUser, addUserToDatabase } from \"./functions/auth\";\r\n\r\nconst createUserForm = document.getElementById(\"createUserForm\");\r\nconst loginForm = document.getElementById(\"loginForm\");\r\n\r\ncreateUserForm.addEventListener(\"submit\", async (e) => {\r\n    e.preventDefault();\r\n\r\n    const name = createUserForm.name.value;\r\n    const email = createUserForm.email.value;\r\n    const password = createUserForm.password.value;\r\n\r\n    const userInfo = {\r\n        name,\r\n        email,\r\n        password,\r\n        isAdmin: false,\r\n    };\r\n\r\n    const newUser = await createUser(auth, userInfo);\r\n    await addUserToDatabase(db, newUser.uid, userInfo);\r\n\r\n    alert(`Bienvenido, ${name}`);\r\n    // window.location.href = \"/products.html\";\r\n});\r\n\r\nloginForm.addEventListener(\"submit\", e => {\r\n    e.preventDefault();\r\n\r\n    const email = loginForm.email.value;\r\n    const password = loginForm.password.value;\r\n\r\n    login(auth, email, password);\r\n});\r\n","import { createUserWithEmailAndPassword, signInWithEmailAndPassword } from \"firebase/auth\";\r\nimport { doc, setDoc } from \"firebase/firestore\";\r\n\r\n\r\nasync function createUser(auth, { email, password }) {\r\n    try {\r\n        const { user } = await createUserWithEmailAndPassword(auth, email, password);\r\n        return user;\r\n    } catch(e) {\r\n \r\n     if(e.code === \"auth/weak-password\") {\r\n         alert(\"Tu contraseña debe tener al menos 6 caracteres\");\r\n     }\r\n \r\n     if(e.code === \"auth/email-already-in-use\") {\r\n         alert(\"Este correo ya se encuentra en uso\");\r\n     }\r\n    }\r\n }\r\n \r\n async function login(auth, email, password) {\r\n     try {\r\n         const { user } = await signInWithEmailAndPassword(auth, email, password);\r\n         alert(`Bienvenido, usuario ${user.email}`);\r\n     } catch(e) {\r\n         alert(\"Correo o contraseña inválida :(\");\r\n     }\r\n }\r\n\r\n async function addUserToDatabase(db, userId, userInfo = {}) {\r\n     try {\r\n         await setDoc(doc(db, \"users\", userId), userInfo)\r\n     } catch (e) {\r\n         console.log(e);\r\n     }\r\n }\r\n\r\n export {\r\n     createUser,\r\n     login,\r\n     addUserToDatabase\r\n }\r\n"],"names":["$li1Mx","parcelRequire","$1tHc5","$3f9d32fa80182a14$var$createUserForm","document","getElementById","$3f9d32fa80182a14$var$loginForm","addEventListener","async","e","preventDefault","name","value","userInfo","email","password","isAdmin","newUser","auth","user","createUserWithEmailAndPassword","code","alert","$9a41b7ebdf9580fc$export$3493b8991d49f558","db","userId","$etBjH","setDoc","doc","console","log","$9a41b7ebdf9580fc$export$9f9c8eae0fddfad1","uid","signInWithEmailAndPassword","$9a41b7ebdf9580fc$export$596d806903d1f59e"],"version":3,"file":"login.ef726143.js.map"}